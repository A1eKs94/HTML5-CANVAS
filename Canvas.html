<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Canvas</title>
    <style>
      body {
        background-color: gray;
      }
      canvas {
        background-color: white;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="500" height="500"></canvas>

    <script>
      const myCanvas = document.getElementById("myCanvas");
      const ctx = myCanvas.getContext("2d");

      var figura = 1;
      var fillColor;
      var strokeColor;
      var isDrawing = false;

      // Eventos

      function getRandomColor() {
        var letters = "0123456789ABCDEF";
        var color = "#";
        for (var i = 0; i < 6; i++) {
          color += letters[Math.floor(Math.random() * 16)];
        }
        return color;
      }

      document
        .getElementById("myCanvas")
        .addEventListener("mouseover", function (e) {
          fillColor = getRandomColor();
          strokeColor = getRandomColor();
        });

      // Cuadrado que se mueve

      var superX = 100;
      var superY = 100;
      var move = '';

      ctx.fillStyle = "Red";
      ctx.strokeColor = "Black";
      ctx.fillRect(superX, superY, 50, 50);

      document.addEventListener("keypress", function (e) {
        console.log(e.keyCode);

        if (e.keyCode == 119) {
          move = "up";
        }
        if (e.keyCode == 115) {
          move = "down";
        }
        if (e.keyCode == 97) {
          move = "left";
        }
        if (e.keyCode == 100) {
          move = "right";
        }

        // En caso de que sobre pase los limites

        if (superX < 0) {
          superX = 499;
          console.log(superX);
        }

        if (superX > 500) {
          superX = 0;
          console.log(superX);
        }

        if (superY < 0) {
          superY = 499;
          console.log(superY);
        }

        if (superY > 500) {
          superY = 0;
          console.log(superY);
        }
      });

      function moveUpdate() {
        if (move == "up") {
          superY -= 10;
          console.log(superY);
        }
        if (move == "down") {
          superY += 10;
          console.log(superY);
        }
        if (move == "left") {
          superX -= 10;
          console.log(superX);
        }
        if (move == "right") {
          superX += 10;
          console.log(superX);
        }
        paint();
      }

      function paint() {
        ctx.fillStyle = "white";
        ctx.fillRect(0, 0, 500, 500);
        ctx.fillStyle = "red";
        ctx.fillRect(superX, superY, 50, 50);
        requestAnimationFrame(moveUpdate);
      }
      requestAnimationFrame(paint);
    </script>
  </body>
</html>
